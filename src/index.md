---
title: '[うつ病の回復への道]{.japanese} (The Road to Recovery from Depression)'
subtitle: 'Or how Learning a New Language and Switching to Linux Helped me Fight back Against Mental Illness[^title]'
title-meta: うつ病の回復への道 (The Road to Recovery from Depression)
author: Jordan Cannon
date: July 20, 2020
keywords: depression, mental health, japanese, linux, programming
description: An in depth look at my struggle with depression and how learning new things has helped me rise above it.
lang: en
---

## [前置き]{.japanese} (Introduction)

I've spent a lot of time pacing recently. From the time I was a child, this has been a sure sign that I am deep in thought about something. Last month I was struck with a strange thought: I should write about what I've been doing with myself recently and post it on the internet. To fully appreciate just how odd of an idea that was, one must understand that I am an **extremely** introverted person.

Now I don't mean to suggest that I'm afraid of people; on the contrary, thanks to ample opportunities to practice with various church groups, I'm actually one of those rare individuals who isn't mortified by public speaking. Finding effective ways to communicate complex topics is intellectually satisfying. But there's a big difference between preaching a sermon or delivering a presentation in an academic setting and the sort of everyday smalltalk I struggle with. Sharing information, so long as you know it well, is a straightforward, clinical sort of endeavor. The anxiety that comes from running out of things to say in a social situation with your peers is another thing all together.

So if I'm not a "people person", then why I am writing about my mental health on the internet where strangers can read it? There are several reasons:

1. My brain has latched onto the idea and isn't going to leave me alone until I finish writing this.
2. This is a good opportunity to explain the gap in my resume to prospective employers. I would hope that anyone who reads through the rest of this post will agree that I haven't simply wasted my time sitting around and being sad. The free time provided by this chapter in my life has allowed me to learn new skills I never would have otherwise. If this is the part you're interested in, feel free to [skip ahead](#i-added-new-technologies-to-my-toolbox) to see what technologies I've been learning about.
3. Most importantly, I hope that sharing my experience can be helpful to other people in some small way. Many others have already stepped forward to share their stories and I applaud them for their bravery in doing so. Talking about mental health issues is never going to be easy, but I think we'll keep making progress as a society towards breaking down the stigma associated with the topic. Since I have personally benefitted a lot from realizing that other people have experienced the same sorts of things I have, it only seems right that I add my voice to the discussion now that I am well enough to do so.

## [私の場合]{.japanese} (My Situation)

A little less than 2 years ago, life as I knew it came to an abrupt and violent end. That's a dramatic statement to make, but I feel that the weight of my description is justified. After all, I dropped out of school, strongly considered taking my own life, and eventually spent months in a nonfunctional state. I'm not going to go into detail about the impetus for my mental breakdown because it's deeply personal and not really relevant to what I want to write about here anyway. What I do want to discuss is my condition before the crisis, what it was like being at rock bottom, and how I've climbed back up to the point where I am today. This is likely going to be a long post, but I plan to talk about important relationships, language, and technology along the way, so I hope that it will be an enjoyable and thought-provoking read.

## [転落の前に]{.japanese} (Before the Fall)

In hindsight it seems ridiculous, arrogant even, but until it happened, I never even considered that I might end up dealing with a major depressive episode. It's not that I looked down on depressed people--after all, several of my loved ones had long battled the illness--but I was (mistakenly) convinced that there was a certain category of people, which I lay outside of, from which the disease chose its targets.

You see, I was afflicted by what appeared at first glance to be depression's complete antithesis. While depression is sadness, loss of interest, and low energy--anxiety is fear, obsession, and adrenaline gone sour. What I didn't realize--but soon discovered the hard way--was one of nature's simplest laws: what goes up must eventually come back down.

By the time I burned out and fell from glory like the proverbial Icarus, I had been cruelly torturing my body for some 6 years in the name of an elusive idol named *success*. As I would stare at my trembling hands, my caffeine-overloaded and sleep-deprived brain justified the dire state of affairs by reasoning that any temporary sacrifices I had to make now would eventually be repaid with interest by the rewards I would receive in the future. I did my best to hide the increasing frequency of my panic attacks. I didn't want to be seen at my most pathetic, a grown adult curled in a ball, sobbing and gasping for breath until I would finally fall asleep completely spent. They came out of nowhere, triggered by seemingly trivial things. I understand now that this was my body's way of forcing me to stop when I refused to do so myself. I knew my lifestyle wasn't healthy, but I was convinced that finding ballance could come later.

## [谷底]{.japanese} (The Bottom of the Ravine)

The event which pushed me over the edge would have been devastating and life-changing no matter what, but being in such a volatile state beforehand undoubtedly worsened matters. It's honestly hard to describe the kind of whiplash I experienced by plunging from one end of the emotional spectrum to the other all at once. I won't try to say which end is worse because they're both completely miserable, just in different ways. For me, being suicidal felt like something was so fundamentally wrong with the world that it ought to come grinding to a halt but it spitefully insisted on continuing to spin. The worst part was that no one else could see the gaping hole that I did. I desperately needed the loneliness of being the only one who could feel that pain with such intensity to stop--even if it meant I had to go away myself. I couldn't have imagined that deeply rooted despair before and knowing that it existed changed everything.

I am very grateful that I was able to get help before I did something I couldn't take back. Even though I was able to get my thoughts of deliberate self-harm under control, I was far from out of the woods. The depressed mind has a wide array of less direct--but still highly potent--methods of attacking one's being. The rest of this section will examine several of these self-detrimental behaviors and ineffective coping mechanisms. Basically this is a list of things that I did to myself which only served to make things worse.

### Poor Sleep Schedule

I was basically a zombie for the first couple of months. A relentless school curriculum followed by a summer internship with a 90 minute commute each direction meant that I was used to sleeping only 4-6 hours on an average night. Less if a lab report was due the next day. But suddenly, I hardly wanted to get out of bed; I was emotionally and physically exhausted. Because I was sleeping so much, I had no real schedule to speak of. The hours I was awake changed from day to day and I mostly spent them watching television.

At some point, my medications began to work and my energy level increased. I was spending more time out of bed and began to work on a number of different projects. This was great at first...but I quickly managed to transform it into a different self-harm. I became manic, obsessing over whatever task I had set for myself and refusing to sleep until I had completed it. Again, I had no schedule. No deadlines. No reason to work so obsessively. But my brain seemed determined to revert to a level of activity similar to what I had maintained during school.

### Neglecting my Physical Needs

The initial low activity level really messed up my appetite. There were many days where I only ate a single meal. I just didn't feel hungry the way I normally would. Furthermore, I really let my personal hygiene go. Trivial tasks that I had previously performed every day of my life suddenly seemed like far to much of a hassle. It's not that I was incapable of doing them. I just didn't see the point. After all, it wasn't like I was planning to leave the house anyway. Actually, in a twisted way, I liked being disgusting. It seemed fitting that my outward appearance should reflect my inward emotions.

### [引っ込む]{.japanese} (Disengaging)

I quit everything. I stopped going to church. I stopped playing my violin. I stopped programming. Nothing mattered enough to put forth the effort.

### Repetitive Thoughts

My mind truly was my own worst enemy during this time. I kept reliving memories in excruciating detail, asking myself what I could have done to make things turn out differently. I would also fantasize about unrealistic circumstances where things would miraculously be fixed. Believing that the future will be better is a good thing, but only when it's based on realistic expectations and a firm grasp of one's own role in getting there. Some bells simply can't be unrung.

Actually, I think this was the single most destructive thing I did to myself. Many of my other problems were rooted in trying to find a way to escape from these thoughts. I slept because when I was awake I would think. If I had to be awake, then I wanted to be so focused on something that my mind couldn't wander.

## [登山]{.japanese} (The Climb)

This is the turning point in the article where I finally get to lighten the tone a bit by discussing various things which have had a positive impact on my recovery. I experienced two main phases:

1. The first was about just trying to get to a point where I could function at all. It was about finding stability, getting my negative emotions under control. It was about getting to a point where I was no longer completely overwhelmed by my emotions and could contemplate doing things again, even though I still felt bad.
2. The rest of the journey has been about trying to move past simply functioning and to actually like myself and be happy with the life I'm living. I'm actually not trying to get back to "normal" because the status-quo I knew for years before was actually pretty miserable in and of itself.

These have both been challenging in their own ways. I felt much worse during the first stage of course, but I also got to see myself making rapid progress at times. When your reference point is rock bottom, any improvement you make feels significant. I can't really draw a sharp line between the two, but I would say that the first phase lasted somewhere between 4-6 months. Getting from stable to "good" has turned out to be a much longer trip. If the initial challenge was a steep climb out of the crevice into which I had fallen, the rest has been more like a long hike over uneven terrain. The path is still inclined, but much less sharply. The going is easier than before, but it's difficult to tell if you're still making progress. At times, you become tired and wonder if you'll ever reach your destination. You may even feel as though you've slipped backwards. But you keep walking, because you've found things that have surprised and delighted you along the way. You've learned that you're capable of things you never would have thought you could accomplish before. You begin to spend less time looking back to where you started and more wondering what is up ahead.

The imagery I've used here is nothing new of course, but it does do a serviceable job of describing the experience. The reality of dealing with depression is far messier than any article makes it sound. There is no magic bullet that will make everything better, but there are undoubtedly things that can help. Here's what worked for me.

### Finding Stability

#### Being Honest About how I Felt

I wish I had recognized my anxiety as a legitimate medical issue and gotten help for it years ago. I know it's tempting to try to keep your feelings bottled up inside. Nobody wants to seem weak to other people. But I probably could have saved myself a lot of suffering if I had addressed it sooner. I'm glad that I didn't make the same mistake when I became suicidal.

I'm really fortunate to have parents who I trust and are easy to talk to[^talk-to-someone]. So I could be frank with them about just how bad I felt when I began to contemplate hurting myself. That meant that I was able to get professional medical help right away. I think it's really important not to try to handle this sort of thing by yourself.


#### [薬をちゃんと飲んだ]{.japanese} (I Took my Medications as Prescribed)

I don't think anyone is really excited about the thought of taking an antidepressant, but boy did I need one (several as it turned out). It took a while to find the right medication and dosages, but I don't want to imagine how much harder getting my inner turbulence under control would have been if I hadn't stuck with it. Going back to see the doctor again and again can be frustrating, but try to remember that they can't help you unless you follow their instructions and give honest feedback about how your mood changes throughout the process.

#### Counseling

I had started seeing a psychologist a couple of months before the start of my depressive episode in an attempt to get my anxiety under control. Again, I should have started seeing one long before I actually did, but it's so easy to put off when you have the packed schedule of a college student. Having a preestablished relationship with a counselor was very helpful when things suddenly went from bad to worse. Depending on where you live, getting an appointment with a psychologist or psychiatrist can take a rather long time, so I would highly recommend doing so sooner rather than later if you are having any sort of mental health problems.

Talk therapy can be a great way to vent. Introvert though I may be, it turned out that I had a lot to say about what I had been through. Putting it into words can really help with processing traumatic events. Having a therapist also gave me someone to be accountable to. You don't have a lot of intrinsic motivation when you're depressed, so having someone to help you set and meet reasonable goals is a great boon. The most important thing I took away though was the reassurance that I wasn't crazy. It was incredibly validating to have specific vocabulary to describe to describe some of things that had happened to me. If it was common enough to coin a term for it, then it wasn't just me.

I also had some really good talks with my pastor, one of the most empathetic people I've ever had the pleasure to meet. Spiritual leaders are a great resource for dealing with the struggles we face throughout life. However, I would caution people to view them as a supplement rather than a replacement for professional help. 


### Pursuing Happiness

#### I got a Dog

He's a black Lab German Shepherd mix named Cocoa Bean. He loves to cuddle, destroys chew toys as fast as I can buy them, and wears a bowtie with hedgehogs on it. Also, he doesn't bark. Basically Cocoa is everything I could have hoped for out of a pet and he's brought a lot of happiness into my life. I could wax poetic about him for many a paragraph, but I'll refrain from doing so in the interest of not derailing the article.

Aside from the obvious benefit of affectionate companionship, getting a dog forced me to restore at least some semblance of a schedule to my life. Dogs are very much creatures of habit. They know when they want to eat, play, and sleep and they aren't shy about reminding you. Repeated nudges from a wet dog nose at breakfast time make for quite an effective alarm clock. At times, Cocoa gently reminds me that we should go to bed by dragging my pillow into the hallway.

With the important caveat that you have to be well enough to actually take care of one first, I would highly recommend getting a pet to anyone looking for a way to put some pep back in their step. Even if owning one yourself isn't an option, take the time to go play with someone else's. You're sure to find yourself smiling for at least a little while.

#### [旅行した]{.japanese} (I Traveled)

I'm rather fond of the metaphorical rock I live under, but I'm glad that I've had several opportunities to get away from home and experience new things. My sister and I went to the Wisconsin Dells where we rode horses, gawked at the majestic creature known as the fennec fox, and even visited the Museum of Historic Torture Devices (her idea, not mine). In Carbondale, IL, I got to hike through some truly beautiful forested areas and visited what may well be the [coolest playground ever](https://boocastlepark.com/)--complete with a sprawling wooden castle and multiple stone dragons. While in Nashville, I ate way to much [Jeni's Ice Cream](https://jenis.com/) and tried VR for the first time. The highlight of the trip was seeing the cityscape from above in a Cessna as the sun set. It's nice to be best friends with a pilot! Also, it's not quite far enough from my home that I'd call it travelling, but the Japanese grocery store [Mitsuwa Marketplace](https://mitsuwa.com/) in Chicago is fantastic. The food court is full of delicious food: ramen, udon, sushi, crepes, mochi, and more. Plus there's an amazing book and stationary shop; I find something new and exciting every time I visit.

#### [大学を辞めました]{.japanese} (I Quit School)

No, I didn't accidentally put this in the wrong section. This is sure to be controversial, but I don't regret my decision. Actually, I'm proud that I had the courage to make it. Lot's of people tried to talk me out of it; after all, I had less than a year of coursework left in my mechanical engineering degree. I certainly could have pushed through the emotional pain and finished if I had wanted to. At no point did I doubt my ability to do so. But here's the thing that I finally realized: just because I *can* do something, doesn't necessarily mean that I *should* do that thing. This was probably the first time in my life that I assessed a challenging prospect not in terms of my capability to overcome it but rather by asking myself if the cost to my wellbeing was justified by the expected rewards for completing it.

There's a common saying that goes something like this: "In college you can have good grades, a social life, or adequate sleep. Choose 2." It certainly rang true for me as I struggled under the notoriously heavy workload of an engineering degree coupled with a lengthy commute to campus. Somehow or other I managed to stay near the top of my class while juggling a relationship, responsibilities at church, and membership in a community orchestra. But I was constantly stressed and exhausted without a moment's rest to relax and simply exist in the moment without someone deadline looming over my being. I was sleeping even less by my junior year despite having given up most of my extracurriculars.

So I simply would not have had the time I needed to properly address my mental health problems if I had proceeded straight into my senior year. An hour of counseling a week would not have been enough to offset the strain of the enormously stressful environment.

I would certainly be better off in someways if had gone. I'm sure I would have gained a ton of unique and valuable experience from the senior design project. I'd probably be working at a great job right. And the structure of school life would have provided sufficient distraction to keep me from sinking as low as I did at my worst.

But I wouldn't have actually dealt with any of my problems--just shoved them under the surface as usual. All I would have been doing was postponing the inevitable breakdown. There is not a question in my mind that I am in a far healthier place now than I would have had any chance of reaching if I hadn't taken the time I needed to focus on myself when I did. I may be a bit behind in life at this point compared to what I expected, but now I have a stable foundation to stand on as I move forward to new opportunities.

The point I'm trying to make is not that dropping out of school or quitting your job is the right thing to do for most people struggling with a mental health condition. It was the right thing for *me* to do at that moment in my life. Improving your mental health is a serious commitment and it takes time. Maybe that means working less overtime or only taking classes part-time. Maybe it means attending fewer social events. It's going to differ from person to person and situation to situation, but the longer you wait, the more disruptive it is likely to be. A bit of preventative self-care can go a long way. Even if you take nothing else away from reading this, please realize that no goal, no matter how grand, is worth sacrificing your health for.

#### [日本語を学び始めました]{.japanese} (I Started Learning Japanese)

This is something I've always wanted to do but told myself would never happen. Despite multiple years of Spanish in middle and high school, the language just never stuck for me. The textbooks and exercise instructions were written mostly in Spanish. I'm all for immersion, but that has to come after the basics of grammar have been mastered and a decent base of vocabulary has been built up. The courses never bothered to teach the phrases found in the instructions and questions themselves, so I was always left taking my best guess. Another big issue I had was that vocabulary was broken into batches and tested at the end of chapters. A few of the terms would pop up on occasion in later chapters, but most wouldn't be seen again until midterms or finals. Thus I got plenty of terms into my short-term memory, but far fewer stuck around for the long haul. I decided that I just wasn't good at languages the way I was at math.

Roughly 6 months ago, I decided on a whim that I might as well put some of my abundant free time to good use and give learning Japanese a stab. I honestly expected to lose interest within a couple of weeks, but I'm happy to say that wasn't the case. In fact, I'm beyond pleased with the progress I've made. I currently know about 600 kanji and 1,900 vocabulary terms. And I don't mean that I encountered that many words during the course of my studies and may or may not recognize any particular one of them now. I really, truly know each of them.

So how have I been able to make so much progress? For starters, I'm way more interested in the language than I was in Spanish. Many of my favorite shows, video games, and foods come from Japan, so the prospect of being able to consume native content and learn more about the culture is highly motivating. I've always planned to visit Japan at some point, and being able to speak the language is sure to make that a far more enjoyable experience.

The second trick to effective language learning is no secret: lots and lots of time. Because of my situation, I've been able to consistently spend 2-3 hours per day on my language studies. I wouldn't have been able to make this kind of progress under more normal circumstances.

Let's dig into the specifics though. What have I actually been doing during all that time? Well, the first task faced by any student of Japanese is learning their hiragana and katakana, collectively known as kana. Hiragana are used for native Japanese words and katakana are used for foreign words or emphasis. These play a role somewhat similar to the standard Roman alphabet with one big difference--these are syllabaries. Each character represents a single, fully formed sound, either a vowel or a vowel-consonant pair. That means that there are about twice as many characters in each syllabary. Since there are two of them, you have to learn four times as many characters as the Roman alphabet just to be able to start reading words. This sounds like a bad thing, but in practice it's one of my favorite things about the language. You see, kana are phonetically consistent. In English, there are a huge number of rules (and exceptions to those rules) for the pronunciation of each letter depending on the word it appears in. Because each kana character has a single, well defined pronunciation, all you have to do is look at a word to know how it is pronounced.

If you're determined, learning how to recognize and pronounce all of the kana will only take a few days at most. I learned them using [duolingo](https://www.duolingo.com/). I quit using the website after a couple of months though because I was finding it less and less effective. The grammar explanations are weak, many of them entirely missing, instead preferring to rely on users in the comments section to explain the questions. The gamification aspects made it very engaging, but I eventually realized that I wasn't accomplishing as much as I thought I was and couldn't actually recall a lot of the words I had previously learned[^duolingo].

| Romaji (English) | Hiragana | Katakana |  Kanji |
|:----------------:|:--------:|:--------:|:------:|
|      nihongo     |  にほんご  |  ニホンゴ   |  日本語  |

Table: The word "Japanese" written in each script

For grammar, I've been using [Tae Kim's Guide to Learning Japanese](http://www.guidetojapanese.org/learn/), the [GENKI](https://www.amazon.com/GENKI-Integrated-Elementary-Japanese-English/dp/4789014401) series of textbooks, and [Japanese the Manga Way: An Illustrated Guide to Grammar and Structure](https://www.amazon.com/Japanese-Manga-Way-Illustrated-Structure/dp/1880656906). The last one sounds a bit gimmicky, but it's actually fantastic. The author does a great job explaining the nuances of the language and all of the examples are taken from real comics so they don't feel contrived the way textbook examples do. My personal advice is that it isn't necessary to spend too much time on grammar right at the beginning. You should learn just enough to comprehend simple sentences. Any more is time that would be better spent on building up your vocabulary. The key to understanding more complex grammar points is seeing them used in lots of example sentences...but that doesn't work very well if you can't read most of the words in those sentences.

Alright, it's finally time to talk about kanji, the thousands of symbolic characters which send shivers down the spines of any prospective learners of the Japanese language. Each kanji can have multiple meanings and pronunciations associated with it. A word may be composed of one or more kanji. Beginner materials often have annotations called furigana which tell you how to pronounce the words written in kanji, but in general you are supposed to have the pronunciation for each word memorized.

Thankfully the internet has some ~~black magic~~ science to help us with this daunting task. [WaniKani](https://www.wanikani.com/) is a website which aims to help it's users learn kanji much faster than can be achieved with traditional methods (wrote repetition, writing the characters over and over). Each level begins by introducing a new set of radicals. These are simple shapes which appear as components of many different kanji. They don't have any meaning or pronunciation of their own, but knowing them makes it easier to learn the kanji that they combine to form. Mnemonics (short stories that assist in remembering a piece of information) are included for each radical. I was skeptical of them at first, but I can attest that some of them have turned out to very useful memory aids. After you have correctly reviewed your radicals several times, you are introduced to a set of kanji which are composed of only radicals you have learned up to that point. You learn the meaning using a mnemonic based on the radicals that make up the kanji. Another mnemonic helps you learn the on'yomi (Chinese) pronunciation for the kanji. After you've correctly reviewed the kanji enough times, you unlock vocabulary words which use them. As usual, there is a mnemonic to help you remember each word's meaning. If the word uses only on'yomi readings, you should already know how to pronounce it. If it uses a kun'yomi (Japanese) reading, an additional mnemonic is given to help you out.

This approach is already an improvement over trying to learn the pronunciation of each word on its own. Just a handful of kanji can combine to form many different words. Knowing the kanji will give you a hint for a new word's meaning an pronunciation (you should still look it up in case it has a strange meaning or doesn't follow the normal pronunciation rules). However, the real power of WaniKani is it's use of a SRS (Spaced Repetition System). Each time you answer a question correctly, the interval of time before you will be asked review that item again increases. On the other hand, answering incorrectly will cause the item to be scheduled for review sooner. Thus you automatically spend more time on the items you struggle with. Because the SRS intervals are tuned to have you review items just before you forget them, they natural end up in your long term memory. You don't have to spend time trying to figure out what to learn next or when to review what. The algorithm handles all of that for you. You just have to show up and do the work.

WaniKani focuses on recognition, the skill you need to read and listen to a language. There is a third party companion website called [KameSame](https://www.kamesame.com/app) which works in the opposite direction by showing you English phrases and asking you to type the corresponding Japanese. The helps to develop your speaking and writing skills, called production.

Graded readers, such as those available from [tadoku](https://tadoku.org/japanese/en/), are a great way to find level appropriate reading materials. Reading something with grammar above your comprehension level or that requires you to constantly pause to look up words isn't very productive. Reading many easy books helps to reinforce the vocabulary you already know and get familiar with common grammatical patterns. As you improve, you can read progressively more difficult texts. I also highly recommend [Satori Reader](https://satorireader.com/), a website that publishes weekly articles on a variety of topics written in Japanese and targeted at learners. There are detailed annotations giving in-context definitions of each word and explanations of difficult grammar points. Furthermore, you can import a list of words you already know and the reader will only display pronunciation aids for words you have yet to encounter. The combined effect keeps you focused on the article instead of jumping away to look up parts you don't understand. Each article also comes with high quality audio that's great for practicing your listening comprehension or checking your pronunciation.

I still have a long way to go before I can read light novels or watch anime without subtitles, but I'm really proud of the progress I've been able to make so far. For example, I recently read a 30 page biography of Kumahachi Aburaya, an important figure in the development Beppu, a tourist destination famous for its hot springs. Being able to do that made me feel good about myself; when you're recovering from depression, that's something to celebrate. So I'd challenge anyone feeling down on their luck to take a chance and try something new. You might surprise yourself with what you're capable of.

#### I Added New Technologies to my Toolbox

I've been programming for 7 years now--sometimes as a hobbyist, sometimes for school assignments, and sometimes to solve problems for real businesses. Driven by technical necessity and intellectual curiosity in equal measure, I've become something of a polyglot. In addition to English and Japanese, I can "speak" C, C#, F#, JavaScript, Python, MATLAB, SQL, Bash, and PowerShell. Of course I've spent more time with some of those than others, but in general I'm comfortable working with a wide array of technologies and can quickly pick up new ones as necessary. Some things I've worked on in the past:

- microcontrollers
- industrial robotics
- 2D games and animations
- data analysis and visualization
- an advertising tool for a heavy trucking dealership
- automating business processes in Excel and Autodesk Inventor

I've spent a considerable amount of time over the last couple of years reading documentation, devouring technical books, and building projects. I've also learned a lot about how my computer works under the hood by tweaking and configuring things for my self from the ground up[^breaking-and-fixing]. Here's what I've been learning about along with links to the books I've used.


##### Web Scraping

I'm a data guy; I love extracting, aggregating, and analyzing anything I can get my hands on. Sometimes because I have actual questions I want answered, other times just because I can. Engineering school may have left me with a slightly unhealthy obsession with making pretty graphs.

The internet is full of useful and interesting data. Unfortunately not all of it is available in easily consumable formats. I'm always thankful when a source provides downloadable CSV files or an API serving JSON. The rest of the time I have to grab a page's raw HTML and massage it a bit.

A surprising percentage of basic web scraping tasks can be accomplished on the fly with shell one-liners. Classic tools like `curl` and `wget` make it easy to grab the HTML you need. You can even use your browser's DevTools to generate a `curl` command with all the headers already included. This is handy if the page requires `Cookies` or `Referer` to be set. `aria2c` is a fantastic tool which can really speed things up by utilizing multiple parallel connections. `pup` reads HTML from a pipe and lets you filter it using standard CSS selectors. `jq` and `jo` make it easy to process and generate JSON.

While the approach described above works well for ad hoc scraping, more complex tasks with the need for more robust error handling require turning to tools such as Python and JavaScript, both of which have excellent web scraping libraries available. Having built-in solutions for things like depagination is really convenient. I also quite like writing scrapers in F#. Node.js can be very helpful for dealing with pages which fetch their content dynamically. When all else fails, browser automation tools like Selenium and Puppeteer can be used. While powerful, I tend to prefer simpler methods when possible as spinning up actual browser instances is an expensive option in terms of performance. 

##### Server Programming

I'm a big fan of static websites for their simplicity, elegance, and speed. Nothing is more straightforward to deploy than a folder full of static files. And as a webscraper, I appreciate receiving a complete page instead of a chunk of JavaScript that lazily loads the content. Not all projects are simple enough to get away with not having a backend though, so I've been learning about writing servers. My tool of choice is Giraffe. It's built on top of ASP.NET Core so it's fast, cross-platform, and integrates well with a large body of existing middleware. It borrows ideas from an earlier project called Suave to make it easy to integrate functional programing techniques into your ASP.NET Core server. Declarative routing, an in-language view engine for HTML templating, and succinct code make it a pleasure to work with.

- [ASP.NET Core 3 and React: Hands-On full stack web development using ASP.NET Core, React, and TypeScript 3](https://www.amazon.com/gp/product/1789950228/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&psc=1)

##### Databases

In a further effort to improve my backend skills, I've been learning about database design, querying, and administration. It's a bit vexing how many different flavors of SQL there are, each with its own idiosyncrasies. I've been focusing mainly on T-SQL, the language used to query Microsoft's SQL Server. Another thing I like about .NET is how easy LINQ makes it to interact with databases from C# code. SQLite is also very nice for its small footprint and ease of setup. I'm not a big fan of the dynamic typing though; I've spent enough time doing functional programming to be convinced that strong type systems help prevent errors.

- [T-SQL Fundamentals](https://www.amazon.com/T-SQL-Fundamentals-3rd-ed-BEN-GAN/dp/8120352963/ref=sr_1_4?crid=RT4V7XNU4CF5&dchild=1&keywords=tsql+fundamentals&qid=1594857131&s=books&sprefix=tsql%2Cstripbooks%2C303&sr=1-4)
- [Exam Ref 70-761 Querying Data with Transact-SQL](https://www.amazon.com/Itzik-Ben-Gan/dp/1509304339/ref=sr_1_3?dchild=1&keywords=70-761&qid=1594857038&s=books&sr=1-3)

##### [L^A^T~E~X]{.latex}

LaTeX is a powerful typesetting system that gives full control over the layout and appearance of documents. It can be used to create books, reports, posters, slide decks, and more. I learned just enough of it during college to add pretty equations to my graphs and lab reports. The documents themselves were prepared with regular word processing software. I decided it would be a good idea to dig deeper and familiarize myself with more of what LaTeX can do.

- [LaTeX Beginner's Guide](https://www.amazon.com/gp/product/1847199860/ref=ppx_yo_dt_b_asin_title_o02_s01?ie=UTF8&psc=1)
- [LaTeX Cookbook](https://www.amazon.com/gp/product/1784395145/ref=ppx_yo_dt_b_asin_title_o02_s02?ie=UTF8&psc=1)

##### Linux

The biggest technological endeavor I undertook by far was switching to Linux. I was something of a Windows power user; I knew all the keyboard shortcuts, troubleshooting techniques, and cool registry hacks. I had heard good things about Linux for software development, so I decided to give it a try out of curiosity. Please don't take offense if I say some negative things about your favorite distro or desktop. There are lots of different types of users out there and these are just my personal thoughts.

I started, like many do, with Ubuntu. My experiment did not last long. I was unimpressed with the performance, workflow, and application selection of the default GNOME environment. To my delight, I discovered that unlike Windows, it was possible to completely change the look and feel of the system by installing different desktop environments. In contrast to the extreme minimalism (lack of features) of GNOME, I thought the endlessly configurable KDE might be more to my liking. Unfortunately, I found the endless settings dialogs to be confusing and poorly organized. I quite liked XFCE. It was responsive and felt similar to what I was used to. I even managed to eek a few more months out of my grandma's dying computer which had slowed to a crawl when trying to run Windows 7. Ultimately, I settled on Linux Mint and the Cinnamon desktop. In many ways, it felt like a more modern, aesthetically pleasing version of XFCE and I used it quite happily for a number of months.

But there were still some things that bothered me. Lots of software I wanted to install required me to configure external PPAs, sometimes there were multiple conflicting ways to configure the same settings, and there was lots of programs preinstalled on my machine that I had not put there and did not use.

I then began spinning up VMs to install and test every Linux distribution I came across. This was entertaining, but largely a waste of time. Eventually I came to realize a closely guarded secret: there was far less differentiating all of these distributions than their websites would have you think. For example, there are half a dozen different "flavors" of Ubuntu which differ only in the software which comes preinstalled. Why people decided to brand these as new distros branched off from Ubuntu instead of adding options to the installer is beyond me. You could easily transform Ubuntu into Xubuntu by running a few `apt-get` commands and changing some configuration files. The most popular pieces of software are available in the repositories of pretty much every distribution.

There are some real differences though, the most important of which is a distribution's release model. A fixed release model moves the operating system from one numbered version to another on a schedule. The kernel and all of the other software running on top of it are upgraded as a unit to newer versions. Note that I say "newer" rather than "the latest" versions. It's not uncommon for the software provided by these distributions to be months or even years out of date. The theory is that this increases stability by given the distribution's developers time to carefully integrate and test everything. In my experience, it means that you have to deal with bugs that have already been fixed in upstream releases. Only upgrading software a few times a year means things break less frequently, but it also gives you far more things to investigate when they do.

The other approach is called a rolling release. This means that new versions of software are made available in the distribution's repositories shortly after they are released by the upstream developers. There are no versioned releases of the operating system. There is only ever "up to date" or "not up to date". You always have the latest and greatest software available. Of course, you do sometimes run into bugs in new versions which haven't been caught yet. I have found that frequent small updates are much easier to troubleshoot than the sorts of major compatibility issues that pop up between different versions of "stable" distributions.

The other major differences between distributions are the selection of software available in the repositories, what the package manager is like, and what software comes preinstalled. Based on these four factors, the right distribution for me ended up being Arch Linux. It should come as no surprise given the preferences I expressed above the Arch is a bleeding edge rolling release distribution. The standard repositories have a great selection of packages, and even the most obscure pieces of software can usually be found in the AUR (Arch User Repository). The package manager is called `pacman`. It is immensely powerful, if a bit arcane at first. A bare bones, albeit not particularly useful, installation contains fewer than 30 packages. I certainly understand why a lot of people want an out-of-box experience that just works, complete with most of the software they'll need. I prefer to choose each component to best suit my needs and know exactly what is running on my system.

Arch aims to be "simple" rather than "easy". A good example is the installation process. There is no graphical installer, just the command line and a set of instructions on the wiki. Fortunately the ArchWiki is marvelous. In fact, I would go so far as to call it the single best source of documentation for Linux end users on the internet. It's full of extremely useful information even for people using other distros. Anyway, the installation process can be a bit intimidating the first time you do it, but it's nowhere near as bad as a lot of people make it out to be[^follow-the-wiki].


Here's a list of ways using Linux has made my life better:

- Package Management and Updates[^choco]: The Windows way of installing software--visiting a website, downloading and running an executable, clicking through a series of windows in a graphical installer, and then waiting--seems perfectly natural when it's all you've every known. But being able to try out new things by simply typing `pacman -S thing1 thing2 thing3` is much less hassle. Updating everything on your system with `pacman -Syu` is both faster than a Windows update, and it shows you everything that is being changed. If something goes wrong, downgrading the responsible package is a straightforward process. It's all so wonderfully transparent.


  Furthermore, system updates don't require restarting your computer. The only reason you need to restart is to replace the currently running instance of the kernel with a newer version.

  ```bash
  $ uptime --pretty
  up 4 weeks, 4 days, 7 hours, 23 minutes
  ```

- Config Files: The settings for most Linux software are controlled by human-readable configuration files stored in standardized locations. Application data and cache files also have a specified location[^windows-config]. This makes it easy to do things like keep your configuration files under version control or exclude cache data from your backups.


- Battery Life: Under similar moderate workloads (surfing the web, listening to music, watching videos etc.) I get 2-3 more hours of battery life out of my laptop when running Linux than I do with Windows. Of course, this is highly configuration dependant. A full desktop with fancy graphics and many services running will obviously fare poorly when compared with a lightweight window manager. There are many settings that can be tweaked to reduce power usage. This can be done manually, but using [tlp](https://linrunner.de/tlp/) provides a much simpler experience. After applying these optimizations, [powertop](https://01.org/powertop) revealed something suprising: my webcam was accounting for about 10% of my laptop's idle power consumption. I rarely use video chat, so I was able to blacklist the appropriate kernel module to disable the webcam and get even more battery savings[^webcam].


- Customization: With Linux, your desktop can look and behave however you want it to.
  - i3 is a tiling window manager that lets you make optimal use of your screen real estate and enhances productivity with highly configurable keybindings and multiple workspaces.
  - Polybar lets you see important information at a glance. It includes modules for standard information like network connections, screen brightness, volume, power, and time, but you can display anything you want so long as you can write a script to display the information.
  - Rofi lets you launch applications just by typing the first few letters of their names. This ends up being a lot faster than searching for and clicking on icons.
  - Dunst is a customizable, keyboard-driven, and scriptable notification manager. I've written scripts to make it alert me when new episodes of shows I'm watching are out and remind me when it's time to do my WaniKani reviews.
  - Ever wished you could have an audio visualizer like the kind you sometimes see in YouTube videos embedded in your desktop? With [GLava](https://github.com/jarcode-foss/glava) you can do just that. The visualizations are written in OpenGL with all the flexibility and performance that entails. Unfortunately, shaders aren't the easiest thing to comprehend for the uninitiated. I remembered learning about the Fourier transform in school, so I decided to write my own [audio visualizer](https://github.com/LiteracyFanatic/mpd-visualizer) in Python as a learning exercise.
- SSH[^ssh-and-mpd]: Accessing another computer remotely feels like magic the first time you do it. I use it to administer the headless Raspberry Pi I have connected to my home's sound system. All my music is on an external hard drive connected to the Pi. Thanks to MPD (Music Player Daemon), I can control the playback from anywhere: the command line, a web browser, or even my phone. Very convenient.


- sudo: This is so much less annoying than UAC popups.
- Looking Inside the Black Box: Using Linux, especially Arch Linux, really encourages you to learn how the different pieces of your operating system fit together. From the bootloader to system services, whether its the graphics stack, networking, or window management, you can see how it all works if you want to. The following snippet of Bash shows that excluding kernel threads, there are 94 unique processes running on my system. I read through the list, and off the top of my head, I know what 84 of them do. I wrote 8 of them. If I don't like the way a component works, I can replace it with something else.

  ```bash
  $ pid="$(pgrep kthread)"
  $ ps -o comm --ppid "$pid" --deselect "$pid" | sort | uniq > programs
  $ wc -l < programs
  94
  ```

I could keep going for a while. Seriously. I have a text file with the names of 40 more programs I wanted to talk about. I'll save those for another article though.

- [ArchWiki](https://wiki.archlinux.org/index.php/Main_page)
- [The Linux Programming Interface: A Linux and UNIX System Programming Handbook](https://www.amazon.com/gp/product/1593272200/ref=ppx_yo_dt_b_asin_title_o04_s00?ie=UTF8&psc=1)
- [Hands-On Network Programming with C: Learn socket programming in C and write secure and optimized network code](https://www.amazon.com/Hands-Network-Programming-programming-optimized-ebook/dp/B07PSJKHKJ)

##### This Article

Actually, the creation of this article itself relied heavily on technology as well. Since they provide a nice synthesis of the topics covered so far, I thought that examining the details of its construction would be a good way to wrap things up. It was written in [Markdown](https://daringfireball.net/projects/markdown/syntax) and compiled to HTML using the excellent [pandoc](https://pandoc.org/index.html). There are a number of tools that can be used to make such conversions, but pandoc is unique in the huge number of document formats it supports.

So far this is nothing special; writing articles is one of the primary use cases for Markdown after all. The challenge came when I decided that I would like to integrate Japanese text into the article. Lot's of websites contain both English and Japanese text. How hard can it be? If, like me, you are a perfectionist who insists on automating every repetitive task you come across, then you already know where this is going...

The first step to making such an article work is easy to overlook, but thankfully quite simple to fix. Not every device comes preinstalled with Japanese fonts. This isn't a problem if your target audience speaks the language, but I can hardly expect my readers to go out of there way to install a special font just so that they can read a random article they came across on the internet. Web fonts to the rescue! A few lines of CSS is all it takes to ensure that Japanese characters will render correctly everywhere. Downloading a web font, especially one containing thousands of kanji, can cause a noticeable delay. Fortunately,  the Google Fonts API provides the `text` parameter which can be used to request only the characters you actually need, drastically reducing the font size. As part of the build process, `ALL_CHARACTERS` in the snippet below is replaced with a URL escaped list of characters appearing in the HTML output.

```css
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap&text=ALL_CHARACTERS');

* {
    font-family: 'Noto Serif JP', serif;
}
```

Earlier I mentioned the pronunciation aids called furigana which display hiragana characters above kanji. This article also needs to support English annotations. The general term for this sort of annotation (Chinese and Korean writing make use of them as well) is ruby. The good news is that HTML has native support for [ruby](https://www.w3.org/International/articles/ruby/markup.en). The bad news is that it's still a draft standard and no browser currently supports the more advanced layout options of the specification. However, the current support is good enough for most cases. The only remaining problem is that the markup is highly verbose and no existing flavor of markdown has baked in support for it. There are several ruby plugins floating around for different Markdown engines, but none of them are full-featured enough for my liking. The major issue is that they all require you to interleave hiragana annotations and kanji in a manner which is difficult to read and edit. I really like the idea of Markdown documents being readable as plain text, so this bothers me.

pandoc supports "filters" written in Lua which makes it relatively easy to add support for any new syntax you could want. My desired workflow requires more than translating one style of markup into another though. I want to actually generate the hiragana and English characters for the kanji on the fly. If anyone knows of an existing tool that can convert text written in kanji to HTML ruby markup without having to specify the hiragana yourself, please let me know. I looked long and hard but failed to find one. It turned out to be a surprisingly complex task. Thankfully, I could leave the heavy lifting to existing libraries and just had to figure out how to staple them together appropriately.

You can't simply process the text character by character. After all, each kanji has multiple possible pronunciations which only become fixed when part of a specific word. This isn't trivial to handle because written Japanese doesn't place spaces between words. kuroshiro is a JavaScript library wrapping MeCab which can break a Japanese sentence down into individual words while also providing pronunciation and part of speech information. Sadly, this isn't enough on it's own. Remember, each word can contain kanji and hiragana. For the English annotations, we want to display the entire word, but it would be redundant to add an identical character above the hiragana. This means it is necessary to tokenize each word so that the kanji and hiragana can be handled separately. The wanakana and kuromoji libraries helped out here. All of this is done as part of the build step and embedded directly into the HTML output. Finally an HTML select element and a bit of JavaScript allow the user to choose to whether to display the furigana as hiragana, English text, or not at all. In the absence of JavaScript, the article falls back to displaying the English annotations. You can view the repository [here](https://github.com/LiteracyFanatic/articles) if you're interested in seeing how everything fits together.

This input in Markdown `[これは日本語の文章です。]{.japanese}` produces the following HTML:
```html
<span class="japanese">
   <ruby>
      <rb>これ</rb>
      <rt data-romaji=kore data-hiragana="">kore</rt>
   </ruby>
   <ruby>
      <rb>は</rb>
      <rt data-romaji=ha data-hiragana="">ha</rt>
   </ruby>
   <ruby>
      <rb>日本語</rb>
      <rt data-romaji=nihongo data-hiragana="にほんご">nihongo</rt>
   </ruby>
   <ruby>
      <rb>の</rb>
      <rt data-romaji=no data-hiragana="">no</rt>
   </ruby>
   <ruby>
      <rb>文章</rb>
      <rt data-romaji=bunshou data-hiragana="ぶんしょう">bunshou</rt>
   </ruby>
   <ruby>
      <rb>です</rb>
      <rt data-romaji=desu data-hiragana="">desu</rt>
   </ruby>
   <ruby>
      <rb>。</rb>
      <rt data-romaji= data-hiragana=""></rt>
   </ruby>
</span>
```

Which renders like this: [これは日本語の文章です。]{.japanese}

Comparing the time I spent figuring all of this out with the amount of Japanese text which appears in this article, it definitely would have been faster to create the markup by hand. The exploration itself was rewarding though, and I could definitely see myself wanting to do something similar again in the future. If I decide to turn this into a proper reusable tool, I'll need to test it against a larger body of text to find edge cases I haven't accounted for yet. There are also some major performance issues to iron out; running the build script with ruby generation enabled currently takes over 20 seconds. This is because the current architecture calls the script on node containing Japanese text as pandoc walks through the Markdown file. Each time this happens, a large dictionary file is read into memory. Fixing this and potentially adding caching for nodes which haven't changed since the last run should speed it up significantly.

## Parting Thoughts

This grew into a real monster of a post. I suppose that's to be expected when you set out to chronicle an era of your life. This has been a chance for me to take stock. Looking back on my darkest moments and pausing to reflect on my recent triumphs has had a truly cathartic effect. Even if no one else reads this, I think it's important for me that I took the time to write it.

If you did take the time to read through part or all of this, thank you so much. Whether it's to engage in a dialogue about the heavier topics of the first half or to discuss the technical details of the latter portion, I'd love to hear your thoughts in the comments below.


[^title]: I'm well aware that this mouthful of a title would be branded an abomination and reworked into something more succinct by anyone with a grain of writing sense. Rather than admit to my poor taste, I'll instead assert that it's a joke about the current trend of turning the titles of Japanese light novels into full-fledged plot synopses.

[^talk-to-someone]: I'm aware that for various reasons not everyone has that kind of relationship with their parents. The point remains, please, don't ignore your feelings. Whether it's a sibling, close friend, romantic partner, or spiritual leader, find *someone* you trust to talk to.

[^duolingo]: My criticisms are aimed specifically at the Japanese duolingo course. As far as I can recall, the Spanish course was much better when I used it several years ago.

[^breaking-and-fixing]: Read repeatedly breaking and fixing things.

[^follow-the-wiki]: Just be sure to follow the instructions on the wiki exactly. Lot's of people run into to trouble because they try to follow an outdated third-party guide.

[^choco]: You can, and should, use a package manager like [Chocolatey](https://chocolatey.org/) on Windows, but the experience is nowhere near as good as you get with Linux.

[^windows-config]: Windows technically has standardized locations for these things as well, but application developers don't do a good job using them. Not all Linux software follows the standards either, but the situation is much better.

[^webcam]: When I do need the webcam, it's a simple `sudo modprobe uvcvideo` away.

[^ssh-and-mpd]: SSH and MPD both work on Windows too, but this is too short to have its own section.
